<!-- nav.html -->
<nav class="site-nav" role="navigation" aria-label="Main Navigation">
  <a class="brand" href="index.html">SustAInability</a>

  <button class="nav-toggle" aria-expanded="false" aria-controls="nav-menu">
    <span class="sr-only">Toggle menu</span> ☰
  </button>

  <div id="nav-menu" class="nav-menu">
    <a href="index.html">Home</a>
    <a href="projects.html">Projects</a>

    <div class="dropdown">
      <button class="dropbtn" aria-haspopup="true" aria-expanded="false">Events ▾</button>
      <div class="dropdown-menu" role="menu">
        <a role="menuitem" href="events.html">All Events</a>
        <a role="menuitem" href="Kickoff_Meeting.html">Kick-Off Meeting</a>
        <a role="menuitem" href="heidelberg_visit.html">Heidelberg Summer School 2025</a>
        <a role="menuitem" href="workshop1.html">Online Workshop — Mar 2025</a>
        <a role="menuitem" href="workshop2.html">Online Workshop — Nov 2025</a>
      </div>
    </div>

    <a href="blog.html">Blog</a>
    <a href="news.html">News</a>

    <div class="dropdown">
      <button class="dropbtn" aria-haspopup="true" aria-expanded="false">Partners ▾</button>
      <div class="dropdown-menu" role="menu">
        <a role="menuitem" href="https://www.srh-hochschule-heidelberg.de/" target="_blank" rel="noopener">SRH University Heidelberg</a>
        <a role="menuitem" href="paragon.html">Paragon International University</a>
        <a role="menuitem" href="https://www.ucentralasia.org/" target="_blank" rel="noopener">University of Central Asia</a>
      </div>
    </div>
  </div>
</nav>

<script>
  const toggleBtn = document.querySelector('.nav-toggle');
  const navMenu = document.getElementById('nav-menu');
  toggleBtn?.addEventListener('click', () => {
    const expanded = toggleBtn.getAttribute('aria-expanded') === 'true';
    toggleBtn.setAttribute('aria-expanded', String(!expanded));
    navMenu.classList.toggle('open');
  });

  const currentFile = location.pathname.split('/').pop() || 'index.html';
  document.querySelectorAll('.nav-menu a[href]').forEach(a => {
    if (a.getAttribute('href') === currentFile) a.setAttribute('aria-current', 'page');
  });

  document.querySelectorAll('.dropdown').forEach(drop => {
    const btn = drop.querySelector('.dropbtn');
    const menu = drop.querySelector('.dropdown-menu');
    btn.addEventListener('click', e => {
      e.preventDefault();
      const open = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!open));
      menu.classList.toggle('open');
    });
  });
</script>
