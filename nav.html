<!-- nav.html -->
<nav class="site-nav" role="navigation" aria-label="Primary">
  <a class="brand" href="index.html">SustAInability</a>

  <button class="nav-toggle" aria-expanded="false" aria-controls="nav-menu">
    <span class="sr-only">Menu</span> ☰
  </button>

  <div id="nav-menu" class="nav-menu">
    <a href="index.html">Home</a>
    <a href="projects.html">Projects</a>

    <div class="dropdown">
      <button class="dropbtn" aria-haspopup="true" aria-expanded="false">Events ▾</button>
      <div class="dropdown-menu" role="menu">
        <a role="menuitem" href="events.html">All Events</a>
        <a role="menuitem" href="Kickoff_Meeting.html">Kick-Off Meeting</a>
      </div>
    </div>

    <a href="blog.html">Blog</a>
    <a href="news.html">News</a>

    <div class="dropdown">
      <button class="dropbtn" aria-haspopup="true" aria-expanded="false">Partners ▾</button>
      <div class="dropdown-menu" role="menu">
        <a role="menuitem" href="https://www.srh-hochschule-heidelberg.de/" target="_blank" rel="noopener">SRH University Heidelberg</a>
        <a role="menuitem" href="paragon.html">Paragon International University</a>
        <a role="menuitem" href="https://www.ucentralasia.org/" target="_blank" rel="noopener">University of Central Asia</a>
      </div>
    </div>

    <div class="lang-switch">
      <a data-lang="en" href="#" aria-current="true">EN</a>
      <span aria-hidden="true">|</span>
      <a data-lang="de" href="#">DE</a>
    </div>
  </div>
</nav>

<script>
  // hamburger toggle
  const btn = document.querySelector('.nav-toggle');
  const menu = document.getElementById('nav-menu');
  btn?.addEventListener('click', () => {
    const expanded = btn.getAttribute('aria-expanded') === 'true';
    btn.setAttribute('aria-expanded', String(!expanded));
    menu.classList.toggle('open');
  });

  // highlight current page
  const current = location.pathname.split('/').pop() || 'index.html';
  document.querySelectorAll('.nav-menu a[href]').forEach(a => {
    if (a.getAttribute('href') === current) {
      a.setAttribute('aria-current', 'page');
    }
  });

  // dropdown toggle
  document.querySelectorAll('.dropdown').forEach(drop => {
    const btn = drop.querySelector('.dropbtn');
    const menu = drop.querySelector('.dropdown-menu');
    btn.addEventListener('click', () => {
      const open = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!open));
      menu.classList.toggle('open');
    });
  });

  // language switcher logic
  document.querySelectorAll('.lang-switch a').forEach(a=>{
    a.addEventListener('click', e=>{
      const lang = a.dataset.lang;
      const currentFile = location.pathname.split('/').pop();
      const target = currentFile.replace(/(_de)?\.html$/, lang==='de' ? '_de.html' : '.html');
      location.href = target;
      e.preventDefault();
    });
  });
</script>
